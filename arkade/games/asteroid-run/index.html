<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroid Run - Kraken Arkade</title>
    <link rel="stylesheet" href="../../shared/css/arkade-theme.css">
    <script src="../../shared/js/arkade-theme.js"></script>
    <style>
        /* Game-specific color overrides - Cyan/Blue theme */
        :root {
            --primary: #0ff;
            --secondary: #f0f;
            --accent: #ff0;
            --glow: #0ff;
        }

        #gameContainer {
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--primary), inset 0 0 20px rgba(0, 255, 255, 0.1);
        }

        /* Boss health bar */
        .boss-health-fill {
            background: linear-gradient(90deg, #0ff 0%, #f0f 100%) !important;
        }

        #mineralsDisplay {
            color: #ff0;
        }

        #livesDisplay {
            font-size: 16px;
            margin-top: 5px;
        }

        /* Move health bar to bottom left */
        #healthBar {
            position: absolute;
            bottom: 60px;
            left: 20px;
            top: auto;
            right: auto;
            width: 200px;
        }

        /* Bomb display above health */
        #bombDisplay {
            position: absolute;
            bottom: 115px;
            left: 20px;
            color: #f80;
            font-size: 18px;
            z-index: 10;
        }
    </style>
</head>

<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <!-- Top UI Bar -->
        <div id="ui">
            <div class="ui-panel">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="scoreDisplay">0</div>
            </div>
            <div class="ui-panel" id="centerPanel">
                <div id="levelDisplay">SECTOR 1 - OUTER RIM</div>
                <div id="comboDisplay"></div>
            </div>
            <div class="ui-panel">
                <div class="stat-label">Minerals</div>
                <div class="stat-value" id="mineralsDisplay">0</div>
            </div>
        </div>

        <!-- Health Bar -->
        <div id="healthBar">
            <div class="stat-label" style="color:#0ff; margin-bottom:3px;">HULL INTEGRITY</div>
            <div class="health-bg">
                <div class="health-fill" id="healthFill" style="width:100%"></div>
            </div>
            <div id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        </div>

        <!-- Distance Progress Bar -->
        <div id="distanceBar">
            <div class="distance-fill" id="distanceFill" style="height:0%"></div>
            <div class="distance-marker" style="bottom:0">START</div>
            <div class="distance-marker" style="top:0">BOSS</div>
        </div>

        <!-- Boss Health -->
        <div id="bossHealthContainer" class="hidden">
            <div class="boss-name" id="bossName">ROCK TITAN</div>
            <div class="boss-health-bg">
                <div class="boss-health-fill" id="bossHealthFill" style="width:100%"></div>
            </div>
        </div>

        <!-- Powerup Bar -->
        <div id="powerupBar">
            <div class="powerup-slot" id="slot-shield"><span class="powerup-icon">üõ°Ô∏è</span>
                <div class="powerup-timer"></div>
            </div>
            <div class="powerup-slot" id="slot-rapid"><span class="powerup-icon">‚ö°</span>
                <div class="powerup-timer"></div>
            </div>
            <div class="powerup-slot" id="slot-triple"><span class="powerup-icon">üî±</span>
                <div class="powerup-timer"></div>
            </div>
            <div class="powerup-slot" id="slot-magnet"><span class="powerup-icon">üß≤</span>
                <div class="powerup-timer"></div>
            </div>
        </div>

        <!-- Bomb Display -->
        <div id="bombDisplay">üí£ x1</div>

        <!-- START SCREEN -->
        <div class="screen" id="startScreen">
            <h1>üöÄ ASTEROID RUN üöÄ</h1>
            <h2>Nebula Escape</h2>

            <div class="controls-grid">
                <div class="control-item"><span class="key-badge">‚Üê ‚Üí</span> Move Ship</div>
                <div class="control-item"><span class="key-badge">‚Üë ‚Üì</span> Speed Up/Down</div>
                <div class="control-item"><span class="key-badge">SPACE</span> Fire Lasers</div>
                <div class="control-item"><span class="key-badge">B</span> Deploy Bomb</div>
                <div class="control-item"><span class="key-badge">ESC</span> Pause</div>
                <div class="control-item"><span class="key-badge">Q</span> Quit</div>
            </div>

            <div class="powerup-legend">
                <div class="powerup-info"><span>üõ°Ô∏è</span> Shield</div>
                <div class="powerup-info"><span>‚ö°</span> Rapid Fire</div>
                <div class="powerup-info"><span>üî±</span> Triple Shot</div>
                <div class="powerup-info"><span>üß≤</span> Loot Magnet</div>
                <div class="powerup-info"><span>üíö</span> Repair Hull</div>
                <div class="powerup-info"><span>üí£</span> Screen Bomb</div>
            </div>

            <button class="btn" id="startBtn">LAUNCH MISSION</button>
            <button class="btn danger" onclick="window.location.href='/arkade/'" style="margin-top:15px">< BACK TO ARKADE</button>
        </div>

        <!-- PAUSE SCREEN -->
        <div class="screen hidden" id="pauseScreen">
            <h1>‚è∏Ô∏è PAUSED</h1>
            <h2>Mission Suspended</h2>
            <button class="btn" id="resumeBtn">RESUME</button>
            <button class="btn danger" id="quitBtn" style="margin-top:15px">QUIT TO MENU (Q)</button>
        </div>

        <!-- GAME OVER SCREEN -->
        <div class="screen hidden" id="gameOverScreen">
            <h1 class="game-over-title">üí• GAME OVER üí•</h1>
            <div id="gameOverStats" style="color:#aaa; margin:20px 0;">
                <p>Sector Reached: <span id="deathSector">1</span></p>
                <p>Final Score: <span id="finalScore">0</span></p>
                <p>Minerals Collected: <span id="lostMinerals">0</span></p>
                <p>Distance: <span id="finalDistance">0 km</span></p>
                <p>Kills: <span id="finalKills">0</span></p>
            </div>
            <button class="btn" id="retryBtn">TRY AGAIN</button>
        </div>

        <!-- VICTORY SCREEN -->
        <div class="screen hidden" id="victoryScreen">
            <h1>üèÜ VICTORY! üèÜ</h1>
            <h2>You Escaped the Nebula!</h2>
            <div id="victoryStats" style="color:#aaa; margin:20px 0;">
                <p>Final Score: <span id="victoryScore">0</span></p>
                <p>Minerals: <span id="victoryMinerals">0</span></p>
                <p>Time: <span id="victoryTime">0:00</span></p>
                <p>Bosses Defeated: <span id="victoryBosses">0</span></p>
            </div>
            <button class="btn" id="victoryBtn">PLAY AGAIN</button>
        </div>

        <!-- LEVEL COMPLETE SCREEN -->
        <div class="screen hidden" id="levelScreen">
            <h1 class="level-complete-title">‚≠ê SECTOR CLEARED! ‚≠ê</h1>
            <h2 id="sectorClearedName"></h2>
            <div id="levelStats" style="color:#aaa; margin:20px 0;">
                <p>Score: <span id="levelScore">0</span></p>
                <p>Minerals: <span id="levelMinerals">0</span></p>
                <p>Accuracy: <span id="levelAccuracy">0%</span></p>
                <p>Max Combo: <span id="levelCombo">0</span></p>
            </div>
            <button class="btn" id="nextLevelBtn">NEXT SECTOR</button>
        </div>

        <!-- KRAKEN SETTINGS -->
        <div class="screen hidden" id="settingsScreen">
            <h1>ü¶ë KRAKEN SETTINGS ü¶ë</h1>
            <h2>Audio Configuration</h2>

            <div style="width:100%; max-width:500px; margin:20px auto; display:flex; gap:30px;">
                <div style="flex:1;">
                    <h3 style="color:#0ff; margin-bottom:15px; font-size:14px;">AUDIO CHANNELS</h3>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#0ff; margin-bottom:5px; font-size:12px;">
                            <span>üéµ Music</span><span id="musicVolLabel">20%</span>
                        </label>
                        <input type="range" id="musicVolume" min="0" max="100" value="20" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#f0f; margin-bottom:5px; font-size:12px;">
                            <span>üí• SFX</span><span id="sfxVolLabel">20%</span>
                        </label>
                        <input type="range" id="sfxVolume" min="0" max="100" value="20" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#ff0; margin-bottom:5px; font-size:12px;">
                            <span>üó£Ô∏è Voice</span><span id="voiceVolLabel">40%</span>
                        </label>
                        <input type="range" id="voiceVolume" min="0" max="100" value="40" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#4f4; margin-bottom:5px; font-size:12px;">
                            <span>üîä Synth</span><span id="synthVolLabel">50%</span>
                        </label>
                        <input type="range" id="synthVolume" min="0" max="100" value="50" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#fff; margin-bottom:5px; font-size:12px;">
                            <span>üîä Master</span><span id="masterVolLabel">60%</span>
                        </label>
                        <input type="range" id="masterVolume" min="0" max="100" value="60" style="width:100%;">
                    </div>
                </div>

                <div style="flex:1;">
                    <h3 style="color:#f80; margin-bottom:15px; font-size:14px;">SYNTH SOUNDS</h3>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#4f4; margin-bottom:5px; font-size:12px;">
                            <span>üíé Collect</span><span id="collectVolLabel">100%</span>
                        </label>
                        <input type="range" id="collectVolume" min="0" max="100" value="100" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#f84; margin-bottom:5px; font-size:12px;">
                            <span>üí¢ Hit</span><span id="hitVolLabel">100%</span>
                        </label>
                        <input type="range" id="hitVolume" min="0" max="100" value="100" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#f44; margin-bottom:5px; font-size:12px;">
                            <span>üí• Explode</span><span id="explodeVolLabel">100%</span>
                        </label>
                        <input type="range" id="explodeVolume" min="0" max="100" value="100" style="width:100%;">
                    </div>

                    <div style="margin-bottom:15px;">
                        <label
                            style="display:flex; justify-content:space-between; color:#4ff; margin-bottom:5px; font-size:12px;">
                            <span>‚¨ÜÔ∏è Powerup</span><span id="powerupVolLabel">100%</span>
                        </label>
                        <input type="range" id="powerupVolume" min="0" max="100" value="100" style="width:100%;">
                    </div>
                </div>
            </div>

            <!-- Debug/Warp Section -->
            <div id="debugSection"
                style="width:100%; max-width:500px; margin:20px auto; border-top:1px solid #444; padding-top:15px;">
                <h3 style="color:#f00; margin-bottom:15px; font-size:14px;">üîß DEBUG / WARP</h3>

                <div style="display:flex; gap:20px; align-items:center; margin-bottom:15px;">
                    <label style="color:#f88; font-size:12px;">
                        <input type="checkbox" id="godModeToggle" style="margin-right:8px;">
                        üëº GOD MODE
                    </label>
                    <label style="color:#ff8; font-size:12px;">
                        <input type="checkbox" id="infiniteBombsToggle" style="margin-right:8px;">
                        üí£ Infinite Bombs
                    </label>
                </div>

                <div style="margin-bottom:10px;">
                    <label style="color:#aaa; font-size:12px; display:block; margin-bottom:8px;">‚ö° WARP TO SECTOR:</label>
                    <div id="warpButtons" style="display:flex; flex-wrap:wrap; gap:5px;"></div>
                </div>
            </div>

            <button class="btn" id="settingsCloseBtn">CLOSE (K)</button>
        </div>
    </div>

    <!-- Shared Modules -->
    <script src="../../shared/js/engine.js"></script>
    <script src="../../shared/js/input.js"></script>
    <script src="../../shared/js/audio.js"></script>
    <script src="../../shared/js/particles.js"></script>
    <script src="../../shared/js/collision.js"></script>
    <script src="../../shared/js/renderer.js"></script>
    <script src="../../shared/js/entities.js"></script>
    <script src="../../shared/js/ui.js"></script>

    <!-- Game-specific code -->
    <script src="game.js"></script>
    <script src="../../shared/js/how-to-play.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            initHowToPlay('asteroid-run', null);

            // Initialize Arkade Theme (starfield only)
            ArkadeTheme.init({ enableStarfield: true, enableMusic: false });

            // Add simple menu music player - use window.Audio to avoid conflict
            const menuMusic = new window.Audio('/arkade/audio/theme_asteroid_run.mp3');
            menuMusic.loop = true;
            menuMusic.volume = 0.15;

            // Create music toggle button
            const musicBtn = document.createElement('button');
            musicBtn.id = 'menu-music-btn';
            musicBtn.innerHTML = 'üîá';
            musicBtn.title = 'Toggle Menu Music';
            musicBtn.style.cssText = `
                position: fixed;
                top: 15px;
                right: 15px;
                z-index: 9999;
                width: 44px;
                height: 44px;
                border-radius: 50%;
                border: 2px solid rgba(0, 255, 255, 0.5);
                background: rgba(0, 0, 0, 0.7);
                color: #0ff;
                font-size: 20px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            document.body.appendChild(musicBtn);

            let isPlaying = false;
            musicBtn.addEventListener('click', () => {
                if (isPlaying) {
                    menuMusic.pause();
                    musicBtn.innerHTML = 'üîá';
                    musicBtn.style.borderColor = 'rgba(0, 255, 255, 0.5)';
                } else {
                    menuMusic.play().catch(() => {});
                    musicBtn.innerHTML = 'üîä';
                    musicBtn.style.borderColor = '#0ff';
                }
                isPlaying = !isPlaying;
            });

            // Stop menu music when game starts
            window.addEventListener('startGame', () => {
                menuMusic.pause();
                musicBtn.style.display = 'none';
            });
        });
    </script>
</body>

</html>
